<!doctype html>
<meta charset="utf-8">
<title>2Dãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ— â€” PP-oscillation</title>
<style>
  :root { --line:#e5e7eb; --muted:#666; }
  body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif; margin:16px; background:#fafafa; }
  .wrap { display:flex; flex-direction:column; gap:16px; }
  .card { background:#fff; border:1px solid var(--line); border-radius:12px; padding:14px; box-shadow:0 1px 2px rgba(0,0,0,.03); }
  .note { color:var(--muted); font-size:.92rem; line-height:1.6; margin-top:8px; }
  canvas { background:#fff; border:1px solid var(--line); border-radius:10px; width:100%; height:520px; }
  .rows { display:grid; grid-template-columns: 160px 1fr 120px; gap:10px 10px; align-items:center; }
  .row { display:contents; }
  input[type="number"], select { width:100%; box-sizing:border-box; }
  input[type="number"]:disabled, select:disabled { background:#f5f5f5; color:#999; cursor:not-allowed; }
  .buttons { display:flex; gap:10px; margin-top:12px; }
  button { padding:8px 12px; border-radius:8px; border:1px solid #d1d5db; background:#f8f8f8; cursor:pointer; }
  button:hover { background:#f0f0f0; }
  .section { border:1px solid #e5e7eb; border-radius:8px; padding:14px; margin-bottom:12px; background:#fafafa; }
  .section-title { font-size:1.05rem; font-weight:600; margin:0 0 10px; color:#374151; }
  .param-group { display:grid; grid-template-columns: 160px 1fr; gap:10px 10px; align-items:center; margin-top:10px; }
  .nav { display:flex; gap:12px; flex-wrap:wrap; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; }
  .nav a { color:#2563eb; text-decoration:none; }
  .nav a:hover { text-decoration:underline; }
</style>

<div class="wrap">
  <div class="nav">
    <a href="../">Home</a>
    <span>Â·</span>
    <a href="../simulator/">Simulator</a>
    <span>Â·</span>
    <a href="../bifurcation/">Bifurcation</a>
    <span>Â·</span>
    <a href="../heatmap/">Heatmap</a>
    <span>Â·</span>
    <a href="../workbench/">Modification Workbench</a>
  </div>

  <div class="card">
    <h2 style="margin:4px 0 10px;">2Dãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</h2>
    <div style="display:flex; gap:16px; flex-wrap:wrap;">
      <div style="flex:2 1 520px; min-width:420px;">
        <canvas id="cv" width="1200" height="560"></canvas>
        <div id="status" class="note"></div>
        <div class="note" style="display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
          è¡¨ç¤º:
          <select id="variantSelect" style="width:auto; min-width:200px;"></select>
        </div>
      </div>
      <div class="card" style="flex:1 1 360px; min-width:320px;">
        <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠ -->
        <div class="section">
          <h3 class="section-title">ğŸ“‹ ãƒ—ãƒªã‚»ãƒƒãƒˆ</h3>
          <div style="display:flex; gap:8px; align-items:center;">
            <select id="preset" style="flex:1;">
              <option value="none">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="mod_assoc">ã‚¢ãƒŸãƒé…¸ä¿®é£¾ã®å½±éŸ¿ï¼ˆå‘¨æœŸï¼‰</option>
              <option value="balance">é…µç´ ãƒãƒ©ãƒ³ã‚¹ã¨å®‰å®šæ€§ï¼ˆæŒ¯å¹…ï¼‰</option>
            </select>
            <button id="applyPreset">é©ç”¨</button>
          </div>
          <div id="presetDesc" class="note" style="margin-top:8px;"></div>
        </div>

        <!-- ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—è¨­å®š -->
        <div class="section">
          <h3 class="section-title">ğŸ“Š ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—è¨­å®š</h3>

          <div class="param-group">
            <label for="xParam"><strong>Xè»¸ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong></label>
            <select id="xParam">
              <option value="G">G (é‹³å‹æ¿ƒåº¦)</option>
              <option value="k1">kâ‚ (ä¼šåˆé€Ÿåº¦å®šæ•°)</option>
              <option value="assoc_ddg">Î”Î”G_assoc (è‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®)</option>
              <option value="assoc_r">r_assoc (ä¼šåˆæ¯”)</option>
              <option value="poly_r">r_poly (ã‚¿ãƒ¼ãƒ³ã‚ªãƒ¼ãƒãƒ¼å€ç‡)</option>
              <option value="nick_r">r_nick (é£½å’Œå€ç‡)</option>
              <option value="pol">pol (ãƒãƒªãƒ¡ãƒ©ãƒ¼ã‚¼æ¿ƒåº¦)</option>
              <option value="rec">rec (åˆ†è§£é…µç´ æ¿ƒåº¦)</option>
              <option value="KmP">KmP (ãƒŸã‚«ã‚¨ãƒªã‚¹å®šæ•°)</option>
              <option value="N0">Nâ‚€ (åˆæœŸpreyæ¿ƒåº¦)</option>
              <option value="P0">Pâ‚€ (åˆæœŸpredatoræ¿ƒåº¦)</option>
            </select>
            <label for="xMin">ã€€æœ€å°å€¤</label>
            <input id="xMin" type="number" step="0.01" value="50">
            <label for="xMax">ã€€æœ€å¤§å€¤</label>
            <input id="xMax" type="number" step="0.01" value="300">
            <label for="xSteps">ã€€åˆ†å‰²æ•°</label>
            <input id="xSteps" type="number" step="1" value="40">
          </div>

          <div class="param-group" style="margin-top:16px;">
            <label for="yParam"><strong>Yè»¸ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong></label>
            <select id="yParam">
              <option value="k1">kâ‚ (ä¼šåˆé€Ÿåº¦å®šæ•°)</option>
              <option value="G">G (é‹³å‹æ¿ƒåº¦)</option>
              <option value="assoc_ddg">Î”Î”G_assoc (è‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®)</option>
              <option value="assoc_r">r_assoc (ä¼šåˆæ¯”)</option>
              <option value="poly_r">r_poly (ã‚¿ãƒ¼ãƒ³ã‚ªãƒ¼ãƒãƒ¼å€ç‡)</option>
              <option value="nick_r">r_nick (é£½å’Œå€ç‡)</option>
              <option value="pol">pol (ãƒãƒªãƒ¡ãƒ©ãƒ¼ã‚¼æ¿ƒåº¦)</option>
              <option value="rec">rec (åˆ†è§£é…µç´ æ¿ƒåº¦)</option>
              <option value="KmP">KmP (ãƒŸã‚«ã‚¨ãƒªã‚¹å®šæ•°)</option>
              <option value="N0">Nâ‚€ (åˆæœŸpreyæ¿ƒåº¦)</option>
              <option value="P0">Pâ‚€ (åˆæœŸpredatoræ¿ƒåº¦)</option>
            </select>
            <label for="yMin">ã€€æœ€å°å€¤</label>
            <input id="yMin" type="number" step="0.01" value="0.2">
            <label for="yMax">ã€€æœ€å¤§å€¤</label>
            <input id="yMax" type="number" step="0.01" value="1.5">
            <label for="ySteps">ã€€åˆ†å‰²æ•°</label>
            <input id="ySteps" type="number" step="1" value="30">
          </div>

          <div class="param-group" style="margin-top:16px;">
            <label for="metric"><strong>è©•ä¾¡æŒ‡æ¨™</strong></label>
            <select id="metric">
              <option value="amplitude">æŒ¯å¹… (max-min) [nM]</option>
              <option value="period">å‘¨æœŸ (ãƒ”ãƒ¼ã‚¯é–“å¹³å‡) [min]</option>
            </select>
            <label for="tail">è©•ä¾¡åŒºé–“ (æœ«å°¾%)</label>
            <input id="tail" type="number" step="1" value="30">
            <label for="t_end">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ [min]</label>
            <input id="t_end" type="number" step="100" value="2600">
            <label for="dt">æ™‚é–“åˆ»ã¿å¹… [min]</label>
            <input id="dt" type="number" step="0.1" value="1">
          </div>
        </div>

        <!-- ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ -->
        <div class="section">
          <h3 class="section-title">âš™ï¸ ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆå›ºå®šå€¤ï¼‰</h3>
          <div class="param-group">
            <label for="pol">pol [nM]</label>
            <input id="pol" type="number" step="0.01" value="3.7">
            <label for="rec">rec [nM]</label>
            <input id="rec" type="number" step="0.01" value="32.5">
            <label for="G">G [nM]</label>
            <input id="G" type="number" step="1" value="150">
            <label for="k1">kâ‚ [nMâ»Â¹minâ»Â¹]</label>
            <input id="k1" type="number" step="0.0001" value="0.0020">
            <label for="k2">kâ‚‚ [minâ»Â¹]</label>
            <input id="k2" type="number" step="0.0001" value="0.0031">
            <label for="kN">kN [minâ»Â¹]</label>
            <input id="kN" type="number" step="0.001" value="0.0210">
            <label for="kP">kP [minâ»Â¹]</label>
            <input id="kP" type="number" step="0.0001" value="0.0047">
            <label for="b">b [nMâ»Â¹]</label>
            <input id="b" type="number" step="0.000001" value="0.000048">
            <label for="KmP">KmP [nM]</label>
            <input id="KmP" type="number" step="1" value="34">
            <label for="N0">Nâ‚€ [nM]</label>
            <input id="N0" type="number" step="0.1" value="10">
            <label for="P0">Pâ‚€ [nM]</label>
            <input id="P0" type="number" step="0.1" value="10">
          </div>
        </div>

        <div class="buttons">
          <button id="runBtn">ğŸš€ ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚’ç”Ÿæˆ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- èª¬æ˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <div class="card" style="margin-top:8px;">
    <h3 style="margin:0 0 8px;">ãƒšãƒ¼ã‚¸3: 2Dãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</h3>
    <h4 style="margin:0 0 6px;">ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦</h4>
    <p>
      ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€2ã¤ã®ç•°ãªã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åŒæ™‚ã«å¤‰åŒ–ã•ã›ãŸã¨ãã«ã€æŒ¯å‹•ã®<strong>å‘¨æœŸï¼ˆæ³¢é•·ï¼‰ã‚„æŒ¯å¹…</strong>ã¨ã„ã£ãŸç‰¹æ€§ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’<strong>ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</strong>ã¨ã—ã¦å¯è¦–åŒ–ã™ã‚‹ã€æœ€ã‚‚é«˜åº¦ãªåˆ†æãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
    </p>
    <p>
      ä¾‹ãˆã°ã€æ¨ªè»¸ã«é‹³å‹DNAæ¿ƒåº¦ <code>G</code>ã€ç¸¦è»¸ã«ã‚¢ãƒŸãƒé…¸ä¿®é£¾ã«ã‚ˆã‚‹è‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·® <code>Î”Î”G<sub>assoc</sub></code> ã‚’è¨­å®šã™ã‚‹ã¨ã€ä¿®é£¾å¼·åº¦ã¨é‹³å‹æ¿ƒåº¦ã®çµ„ã¿åˆã‚ã›ã”ã¨ã«æŒ¯å‹•å‘¨æœŸãŒã©ã†å¤‰åŒ–ã™ã‚‹ã‹ã‚’è‰²ã§ä¿¯ç°ã§ãã¾ã™ã€‚
    </p>
    <p>
      <em>æ–‡è„ˆ:</em> ã‚ãªãŸã®æœ€çµ‚ç›®æ¨™ã¯ã€ŒDNAã¸ã®ã‚¢ãƒŸãƒé…¸çµåˆãŒæŒ¯å‹•ã®æ³¢é•·ã‚’ã©ã†å¤‰ãˆã‚‹ã‹ã€ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ãã®å•ã„ã«æœ€ã‚‚ç›´æ¥çš„ã«ç­”ãˆã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚ã“ã®ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚’ä½¿ãˆã°ã€ã€Œã‚¢ãƒŸãƒé…¸ä¿®è£œé£¾åŠ¹æœ(<code>kâ‚</code>ã®ä½ä¸‹)ã¯ã€<code>G</code>æ¿ƒåº¦ãŒä½ã„é ˜åŸŸã§ã¯å‘¨æœŸã‚’ã‚ãšã‹ã«ä¼¸ã°ã™ã ã‘ã ãŒã€<code>G</code>æ¿ƒåº¦ãŒé«˜ã„é ˜åŸŸã§ã¯å‘¨æœŸã‚’åŠ‡çš„ã«å¤‰åŒ–ã•ã›ã‚‹ã€ã¨ã„ã£ãŸã€<strong>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é–“ã®è¤‡é›‘ãªç›¸äº’ä½œç”¨</strong>ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã€Œxxã¨ã„ã†æ¡ä»¶ä¸‹ã§yyã¨ã„ã†çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã ã€ã¨ã„ã†ã€å®Ÿé¨“çš„ã«æ¤œè¨¼å¯èƒ½ãª<strong>å…·ä½“çš„ãªä»®èª¬</strong>ã‚’ç”Ÿã¿å‡ºã™ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
    </p>
  </div>
</div>

<script type="module" src="./heatmap.js"></script>
